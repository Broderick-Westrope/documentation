---
id: observability
title: Go SDK developer's guide - Observability
sidebar_label: Observability
sidebar_position: 3
description: The Observability section of the Temporal Developer's guide covers the many ways to view the current state of your Temporal Application—that is, ways to view what Workflow Executions are tracked by the Platform and the state of any given Workflow Execution, either currently or at points of an execution.
slug: /dev-guide/go/observability
toc_max_heading_level: 4
keywords:
- api
- context propagators
- developer-guide-doc-type
- go sdk
- how-to-doc-type
- interceptor
- introduction-doc-type
- list filter
- list filters
- logging and metrics
- observability
- search attributes
- temporal client
- tracing
- visibility
- workflow definition
- workflow execution
- workflow executions
- workflows
tags:
- api
- context-propagators
- developer-guide-doc-type
- go-sdk
- how-to-doc-type
- interceptor
- introduction-doc-type
- list-filter
- list-filters
- logging-and-metrics
- observability
- search-attributes
- temporal-client
- tracing
- visibility
- workflow-definition
- workflow-execution
- workflow-executions
- workflows
---

<!-- THIS FILE IS GENERATED. DO NOT EDIT THIS FILE DIRECTLY -->

The observability section of the Temporal Developer's guide covers the many ways to view the current state of your [Temporal Application](/temporal#temporal-application) <span id="i-31fc802b-03a4-49c8-86d0-2a10d509cdb2" class="clickable-i clickable-link-preview">i</span><div id="preview-modal-31fc802b-03a4-49c8-86d0-2a10d509cdb2" class="preview-modal"><div class="modal-header"><div id="x-31fc802b-03a4-49c8-86d0-2a10d509cdb2" class="clickable-x clickable-link-preview">x</div><b>Link preview:</b>&nbsp;&nbsp<a href="/temporal#temporal-application">/temporal#temporal-application</a></div><div class="preview-modal-title">What is a Temporal Application?</div><div class="preview-modal-description">A Temporal Application is a set of Workflow Executions.</div><div class="preview-modal-tags"><a class="preview-modal-tag" href="/tags/term">term</a> <a class="preview-modal-tag" href="/tags/explanation">explanation</a></div></div>—that is, ways to view which [Workflow Executions](/workflows#workflow-execution) are tracked by the [Temporal Platform](/temporal#temporal-platform) <span id="i-0e24a038-4e52-4fba-8b03-f761bacf067d" class="clickable-i clickable-link-preview">i</span><div id="preview-modal-0e24a038-4e52-4fba-8b03-f761bacf067d" class="preview-modal"><div class="modal-header"><div id="x-0e24a038-4e52-4fba-8b03-f761bacf067d" class="clickable-x clickable-link-preview">x</div><b>Link preview:</b>&nbsp;&nbsp<a href="/temporal#temporal-platform">/temporal#temporal-platform</a></div><div class="preview-modal-title">What is the Temporal Platform?</div><div class="preview-modal-description">The Temporal Platform consists of a Temporal Cluster and Worker Processes.</div><div class="preview-modal-tags"><a class="preview-modal-tag" href="/tags/term">term</a> <a class="preview-modal-tag" href="/tags/explanation">explanation</a></div></div> and the state of any specified Workflow Execution, either currently or at points of an execution.

This section covers features related to viewing the state of the application, including:

- [Metrics](#metrics)
- [Tracing](#tracing)
- [Logging](#logging)
- [Visibility](#visibility)

## How to emit metrics {#metrics}

Each Temporal SDK is capable of emitting an optional set of metrics from either the Client or the Worker process.
For a complete list of metrics capable of being emitted, see the [SDK metrics reference](/references/sdk-metrics#) <span id="i-b98e3e5c-67af-408c-a238-348e994a1534" class="clickable-i clickable-link-preview">i</span><div id="preview-modal-b98e3e5c-67af-408c-a238-348e994a1534" class="preview-modal"><div class="modal-header"><div id="x-b98e3e5c-67af-408c-a238-348e994a1534" class="clickable-x clickable-link-preview">x</div><b>Link preview:</b>&nbsp;&nbsp<a href="/references/sdk-metrics#">/references/sdk-metrics#</a></div><div class="preview-modal-title">SDK metrics</div><div class="preview-modal-description">The Temporal SDKs emit metrics from Temporal Client usage and Worker Processes.</div><div class="preview-modal-tags"><a class="preview-modal-tag" href="/tags/reference">reference</a></div></div>.

Metrics can be scraped and stored in time series databases, such as:

- [Prometheus](https://prometheus.io/docs/introduction/overview/)
- [M3db](https://m3db.io/docs/)
- [statsd](https://github.com/statsd/statsd)

Temporal also provides a dashboard you can integrate with graphing services like [Grafana](https://grafana.com/docs/). For more information, see:

- Temporal's implementation of the [Grafana dashboard](https://github.com/temporalio/dashboards)
- [How to export metrics in Grafana](https://github.com/temporalio/helm-charts#exploring-metrics-via-grafana)

To emit metrics from the Temporal Client in Go, create a [metrics handler](https://pkg.go.dev/go.temporal.io/sdk/internal/common/metrics#Handler) from the [Client Options](https://pkg.go.dev/go.temporal.io/sdk@v1.15.0/internal#ClientOptions) and specify a listener address to be used by Prometheus.

```go
client.Options{
		MetricsHandler: sdktally.NewMetricsHandler(newPrometheusScope(prometheus.Configuration{
			ListenAddress: "0.0.0.0:9090",
			TimerType:     "histogram",
		}
```

The Go SDK currently supports the [Tally](https://pkg.go.dev/go.temporal.io/sdk/contrib/tally) library; however, Tally offers [extensible custom metrics reporting](https://github.com/uber-go/tally#report-your-metrics), which is exposed through the [`WithCustomMetricsReporter`](/references/server-options#withcustommetricsreporter) <span id="i-4f10151b-3623-446b-806c-53f1a308bc05" class="clickable-i clickable-link-preview">i</span><div id="preview-modal-4f10151b-3623-446b-806c-53f1a308bc05" class="preview-modal"><div class="modal-header"><div id="x-4f10151b-3623-446b-806c-53f1a308bc05" class="clickable-x clickable-link-preview">x</div><b>Link preview:</b>&nbsp;&nbsp<a href="/references/server-options#withcustommetricsreporter">/references/server-options#withcustommetricsreporter</a></div><div class="preview-modal-title">Temporal Server options</div><div class="preview-modal-description">You can run the Temporal Server as a Go application by including the server package `go.temporal.io/server/temporal` and using it to create and start a Temporal Server.</div><div class="preview-modal-tags"><a class="preview-modal-tag" href="/tags/reference">reference</a> <a class="preview-modal-tag" href="/tags/web-ui">web-ui</a></div></div> API.

For more information, see the [Go sample for metrics](https://github.com/temporalio/samples-go/tree/main/metrics).

## Tracing and Context Propagation {#tracing-and-context-propogation}

The Go SDK provides support for distributed tracing through [OpenTracing](https://opentracing.io/).
Tracing allows you to view the call graph of a Workflow along with its Activities and any Child Workflows.

Tracing can be configured by providing an [opentracing.Tracer](https://pkg.go.dev/github.com/opentracing/opentracing-go#Tracer)
implementation in [ClientOptions](https://pkg.go.dev/go.temporal.io/sdk/internal#ClientOptions) during client instantiation.
For more details on how to configure and leverage tracing, see the [OpenTracing documentation](https://opentracing.io/docs/getting-started/).

The OpenTracing support has been validated using [Jaeger](https://www.jaegertracing.io/), but other implementations mentioned [here](https://opentracing.io/docs/supported-tracers/) should also work.
Tracing functionality utilizes generic context propagation provided by the client.

### Context Propagation

Temporal provides a standard way to propagate a custom context across a Workflow.
You can configure a context propagator in via the [ClientOptions](https://pkg.go.dev/go.temporal.io/sdk/internal#ClientOptions).
The context propagator extracts and passes on information present in `context.Context` and `workflow.Context` objects across the Workflow.
Once a context propagator is configured, you should be able to access the required values in the context objects as you would normally do in Go.
You can see how the Go SDK implements a [tracing context propagator](https://github.com/temporalio/sdk-go/blob/master/internal/tracer.go).

#### Server-Side Headers

On the server side, Temporal provides a mechanism for propagating context across Workflow transitions called headers.

```proto
message Header {
    map<string, Payload> fields = 1;
}
```

`Client` leverages headers to pass around additional context information.
[HeaderReader](https://pkg.go.dev/go.temporal.io/sdk/internal#HeaderReader) and [HeaderWriter](https://pkg.go.dev/go.temporal.io/sdk/internal#HeaderWriter) are interfaces that allow reading and writing to the Temporal Server headers.
The SDK includes [implementations](https://github.com/temporalio/sdk-go/blob/master/internal/headers.go) for these interfaces.
`HeaderWriter` sets a value for a header.
Headers are held as a map, so setting a value for the same key will overwrite its previous value.
`HeaderReader` gets a value of a header.
It also can iterate through all headers and execute the provided handler function on each header, so that your code can operate on select headers you need.

```go
type HeaderWriter interface {
	Set(string, *commonpb.Payload)
}

type HeaderReader interface {
	Get(string) (*commonpb.Payload, bool)
	ForEachKey(handler func(string, *commonpb.Payload) error) error
}
```

#### Context Propagators

You can propagate additional context through Workflow Execution by using a context propagator.
A context propagator needs to implement the `ContextPropagator` interface that includes the following four methods:

```go
type ContextPropagator interface {
  Inject(context.Context, HeaderWriter) error

  Extract(context.Context, HeaderReader) (context.Context, error)

  InjectFromWorkflow(Context, HeaderWriter) error

  ExtractToWorkflow(Context, HeaderReader) (Context, error)
}
```

- `Inject` reads select context keys from a Go [context.Context](https://golang.org/pkg/context/#Context) object and writes them into the headers using the [HeaderWriter](https://pkg.go.dev/go.temporal.io/sdk/internal#HeaderWriter) interface.
- `InjectFromWorkflow` operates similar to `Inject` but reads from a [workflow.Context](https://pkg.go.dev/go.temporal.io/sdk/internal#Context) object.
- `Extract` picks select headers and put their values into the [context.Context](https://golang.org/pkg/context/#Context) object.
- `ExtractToWorkflow` operates similar to `Extract` but write to a [workflow.Context](https://pkg.go.dev/go.temporal.io/sdk/internal#Context) object.

The [tracing context propagator](https://github.com/temporalio/sdk-go/blob/master/internal/tracer.go) shows a sample implementation of a context propagator.

#### Is there a complete example?

The [context propagation sample](https://github.com/temporalio/samples-go/blob/master/ctxpropagation/) configures a custom context propagator and shows context propagation of custom keys across a Workflow and an Activity.
It also uses Jaeger for tracing.

#### Can I configure multiple context propagators?

Yes. Multiple context propagators help to structure code with each propagator having its own scope of responsibility.

### Useful Resources

- [Passing Context with Temporal](https://spiralscout.com/blog/passing-context-with-temporal) by SpiralScout

The [Go SDK](https://github.com/temporalio/sdk-go) provides support for distributed tracing with **_Interceptors_**.
Interceptors uses Temporal headers to create a call graph of a [Workflow](/workflows#) <span id="i-d77e814c-0d0c-406e-9020-ea99d3d681a5" class="clickable-i clickable-link-preview">i</span><div id="preview-modal-d77e814c-0d0c-406e-9020-ea99d3d681a5" class="preview-modal"><div class="modal-header"><div id="x-d77e814c-0d0c-406e-9020-ea99d3d681a5" class="clickable-x clickable-link-preview">x</div><b>Link preview:</b>&nbsp;&nbsp<a href="/workflows#">/workflows#</a></div><div class="preview-modal-title">What is a Workflow?</div><div class="preview-modal-description">In day-to-day conversations, the term "Workflow" frequently denotes either a Workflow Type, a Workflow Definition, or a Workflow Execution.</div><div class="preview-modal-tags"><a class="preview-modal-tag" href="/tags/term">term</a> <a class="preview-modal-tag" href="/tags/explanation">explanation</a></div></div>, along with its [Activities](/activities#) <span id="i-1c319d8a-2f7b-40f7-bab2-779ca2f7e845" class="clickable-i clickable-link-preview">i</span><div id="preview-modal-1c319d8a-2f7b-40f7-bab2-779ca2f7e845" class="preview-modal"><div class="modal-header"><div id="x-1c319d8a-2f7b-40f7-bab2-779ca2f7e845" class="clickable-x clickable-link-preview">x</div><b>Link preview:</b>&nbsp;&nbsp<a href="/activities#">/activities#</a></div><div class="preview-modal-title">What is an Activity?</div><div class="preview-modal-description">In day-to-day conversation, the term "Activity" denotes an Activity Type, Activity Definition, or Activity Execution.</div><div class="preview-modal-tags"><a class="preview-modal-tag" href="/tags/term">term</a> <a class="preview-modal-tag" href="/tags/explanation">explanation</a></div></div> and [Child Workflows](/workflows#child-workflow) <span id="i-ad2c5a7f-29b4-4f23-ab35-2ab51d5c78c2" class="clickable-i clickable-link-preview">i</span><div id="preview-modal-ad2c5a7f-29b4-4f23-ab35-2ab51d5c78c2" class="preview-modal"><div class="modal-header"><div id="x-ad2c5a7f-29b4-4f23-ab35-2ab51d5c78c2" class="clickable-x clickable-link-preview">x</div><b>Link preview:</b>&nbsp;&nbsp<a href="/workflows#child-workflow">/workflows#child-workflow</a></div><div class="preview-modal-title">What is a Child Workflow Execution?</div><div class="preview-modal-description">A Child Workflow Execution is a Workflow Execution that is spawned from within another Workflow.</div><div class="preview-modal-tags"><a class="preview-modal-tag" href="/tags/term">term</a> <a class="preview-modal-tag" href="/tags/explanation">explanation</a> <a class="preview-modal-tag" href="/tags/child-workflow">child-workflow</a></div></div>.

There are several tracing implementations supported by the Temporal Go SDK.
For an [OpenTracing](https://pkg.go.dev/go.temporal.io/sdk/contrib/opentracing) Interceptor, use `opentracing.NewInterceptor(opentracing.TracerOptions{})` to create a `TracingInterceptor`.

```go
// create Interceptor
tracingInterceptor, err := opentracing.NewInterceptor(opentracing.TracerOptions{})
```

For an [OpenTelemetry](https://pkg.go.dev/go.temporal.io/sdk/contrib/opentelemetry) Interceptor, use `opentelemetry.NewTracingInterceptor(opentelemetry.TracerOptions{})`.

```go
// create Interceptor
tracingInterceptor, err := opentelemetry.NewTracingInterceptor(opentelemetry.TracerOptions{})
```

For a [Datadog](https://pkg.go.dev/go.temporal.io/sdk/contrib/datadog/tracing) Interceptor, use `tracing.NewTracingInterceptor(tracing.TracerOptions{})`.

```go
// create Interceptor
tracingInterceptor, err := tracing.NewTracingInterceptor(tracing.TracerOptions{})
```

Pass the newly created Interceptor to [ClientOptions](https://pkg.go.dev/go.temporal.io/sdk/internal#ClientOptions) to enable tracing.

```go
c, err := client.Dial(client.Options{
  Interceptors:       []interceptor.ClientInterceptor{tracingInterceptor},
})
```

OpenTracing and OpenTelemetry are natively supported by [Jaeger](https://www.jaegertracing.io/docs/1.46/features/#native-support-for-opentracing-and-opentelemetry).
For more information on configuring and using tracing, see the documentation provided by [OpenTracing](https://opentracing.io), [OpenTelemetry](https://opentelemetry.io/), and [Datadog](https://docs.datadoghq.com/tracing/).

## How to log from a Workflow {#logging}

Send logs and errors to a logging service, so that when things go wrong, you can see what happened.

The SDK core uses `WARN` for its default logging level.

In Workflow Definitions you can use [`workflow.GetLogger(ctx)`](https://pkg.go.dev/go.temporal.io/sdk/workflow#GetLogger) to write logs.

```go
import (
	"context"
	"time"

	"go.temporal.io/sdk/activity"
	"go.temporal.io/sdk/workflow"
)

// Workflow is a standard workflow definition.
// Note that the Workflow and Activity don't need to care that
// their inputs/results are being compressed.
func Workflow(ctx workflow.Context, name string) (string, error) {
// ...

workflow.WithActivityOptions(ctx, ao)

// Getting the logger from the context.
	logger := workflow.GetLogger(ctx)
// Logging a message with the key value pair `name` and `name`
	logger.Info("Compressed Payloads workflow started", "name", name)

	info := map[string]string{
		"name": name,
	}


	logger.Info("Compressed Payloads workflow completed.", "result", result)

	return result, nil
}
```

### How to provide a custom logger {#custom-logger}

Use a custom logger for logging.

This field sets a custom Logger that is used for all logging actions of the instance of the Temporal Client.

Although the Go SDK does not support most third-party logging solutions natively, [our friends at Banzai Cloud](https://github.com/sagikazarmark) built the adapter package [logur](https://github.com/logur/logur) which makes it possible to use third party loggers with minimal overhead.
Most of the popular logging solutions have existing adapters in Logur, but you can find a full list [in the Logur Github project](https://github.com/logur?q=adapter-).

Here is an example of using Logur to support [Logrus](https://github.com/sirupsen/logrus):

```go
package main
import (
  "go.temporal.io/sdk/client"

	"github.com/sirupsen/logrus"
	logrusadapter "logur.dev/adapter/logrus"
	"logur.dev/logur"
)

func main() {
  // ...
  logger := logur.LoggerToKV(logrusadapter.New(logrus.New()))
  clientOptions := client.Options{
    Logger: logger,
  }
  temporalClient, err := client.Dial(clientOptions)
  // ...
}
```

## How to use Visibility APIs {#visibility}

The term Visibility, within the Temporal Platform, refers to the subsystems and APIs that enable an operator to view Workflow Executions that currently exist within a Cluster.

### How to use Search Attributes {#search-attributes}

The typical method of retrieving a Workflow Execution is by its Workflow Id.

However, sometimes you'll want to retrieve one or more Workflow Executions based on another property. For example, imagine you want to get all Workflow Executions of a certain type that have failed within a time range, so that you can start new ones with the same arguments.

You can do this with [Search Attributes](/visibility#search-attribute) <span id="i-5eeda3bf-4537-45e5-96c0-16cd617e53f5" class="clickable-i clickable-link-preview">i</span><div id="preview-modal-5eeda3bf-4537-45e5-96c0-16cd617e53f5" class="preview-modal"><div class="modal-header"><div id="x-5eeda3bf-4537-45e5-96c0-16cd617e53f5" class="clickable-x clickable-link-preview">x</div><b>Link preview:</b>&nbsp;&nbsp<a href="/visibility#search-attribute">/visibility#search-attribute</a></div><div class="preview-modal-title">What is a Search Attribute?</div><div class="preview-modal-description">A Search Attribute is an indexed name used in List Filters to filter a list of Workflow Executions that have the Search Attribute in their metadata.</div><div class="preview-modal-tags"><a class="preview-modal-tag" href="/tags/term">term</a> <a class="preview-modal-tag" href="/tags/explanation">explanation</a> <a class="preview-modal-tag" href="/tags/filtered-lists">filtered-lists</a> <a class="preview-modal-tag" href="/tags/visibility">visibility</a></div></div>.

- [Default Search Attributes](/visibility#default-search-attributes) <span id="i-7580a4d5-ec1b-48ab-a64d-5b6b98d46e37" class="clickable-i clickable-link-preview">i</span><div id="preview-modal-7580a4d5-ec1b-48ab-a64d-5b6b98d46e37" class="preview-modal"><div class="modal-header"><div id="x-7580a4d5-ec1b-48ab-a64d-5b6b98d46e37" class="clickable-x clickable-link-preview">x</div><b>Link preview:</b>&nbsp;&nbsp<a href="/visibility#default-search-attributes">/visibility#default-search-attributes</a></div><div class="preview-modal-title">What is a Search Attribute?</div><div class="preview-modal-description">A Search Attribute is an indexed name used in List Filters to filter a list of Workflow Executions that have the Search Attribute in their metadata.</div><div class="preview-modal-tags"><a class="preview-modal-tag" href="/tags/term">term</a> <a class="preview-modal-tag" href="/tags/explanation">explanation</a> <a class="preview-modal-tag" href="/tags/filtered-lists">filtered-lists</a> <a class="preview-modal-tag" href="/tags/visibility">visibility</a></div></div> like `WorkflowType`, `StartTime` and `ExecutionStatus` are automatically added to Workflow Executions.
- _Custom Search Attributes_ can contain their own domain-specific data (like `customerId` or `numItems`).
  - A few [generic Custom Search Attributes](/visibility#custom-search-attributes) <span id="i-b5728241-7ef9-4f2d-92f7-9751515a5f74" class="clickable-i clickable-link-preview">i</span><div id="preview-modal-b5728241-7ef9-4f2d-92f7-9751515a5f74" class="preview-modal"><div class="modal-header"><div id="x-b5728241-7ef9-4f2d-92f7-9751515a5f74" class="clickable-x clickable-link-preview">x</div><b>Link preview:</b>&nbsp;&nbsp<a href="/visibility#custom-search-attributes">/visibility#custom-search-attributes</a></div><div class="preview-modal-title">What is a Search Attribute?</div><div class="preview-modal-description">A Search Attribute is an indexed name used in List Filters to filter a list of Workflow Executions that have the Search Attribute in their metadata.</div><div class="preview-modal-tags"><a class="preview-modal-tag" href="/tags/term">term</a> <a class="preview-modal-tag" href="/tags/explanation">explanation</a> <a class="preview-modal-tag" href="/tags/filtered-lists">filtered-lists</a> <a class="preview-modal-tag" href="/tags/visibility">visibility</a></div></div> like `CustomKeywordField` and `CustomIntField` are created by default in Temporal's [Docker Compose](/kb/all-the-ways-to-run-a-cluster#docker-compose).

The steps to using custom Search Attributes are:

- Create a new Search Attribute in your Cluster using `tctl search-attribute create` or the Cloud UI.
- Set the value of the Search Attribute for a Workflow Execution:
  - On the Client by including it as an option when starting the Execution.
  - In the Workflow by calling `UpsertSearchAttributes`.
- Read the value of the Search Attribute:
  - On the Client by calling `DescribeWorkflow`.
  - In the Workflow by looking at `WorkflowInfo`.
- Query Workflow Executions by the Search Attribute using a [List Filter](/visibility#list-filter) <span id="i-95b93cbb-ec99-4f59-95d1-708724f2ff94" class="clickable-i clickable-link-preview">i</span><div id="preview-modal-95b93cbb-ec99-4f59-95d1-708724f2ff94" class="preview-modal"><div class="modal-header"><div id="x-95b93cbb-ec99-4f59-95d1-708724f2ff94" class="clickable-x clickable-link-preview">x</div><b>Link preview:</b>&nbsp;&nbsp<a href="/visibility#list-filter">/visibility#list-filter</a></div><div class="preview-modal-title">What is a List Filter?</div><div class="preview-modal-description">A List Filter is the SQL-like string that is provided as the parameter to an advanced Visibility List API.</div><div class="preview-modal-tags"><a class="preview-modal-tag" href="/tags/term">term</a> <a class="preview-modal-tag" href="/tags/explanation">explanation</a> <a class="preview-modal-tag" href="/tags/filtered-lists">filtered-lists</a> <a class="preview-modal-tag" href="/tags/visibility">visibility</a></div></div>:
  - [In `tctl`](/tctl-v1/workflow#list) <span id="i-04b6bcf3-2641-41a8-8ef3-e0f591f53bbe" class="clickable-i clickable-link-preview">i</span><div id="preview-modal-04b6bcf3-2641-41a8-8ef3-e0f591f53bbe" class="preview-modal"><div class="modal-header"><div id="x-04b6bcf3-2641-41a8-8ef3-e0f591f53bbe" class="clickable-x clickable-link-preview">x</div><b>Link preview:</b>&nbsp;&nbsp<a href="/tctl-v1/workflow#list">/tctl-v1/workflow#list</a></div><div class="preview-modal-title">tctl workflow list</div><div class="preview-modal-description">How to list open or closed Workflow Executions using tctl.</div><div class="preview-modal-tags"><a class="preview-modal-tag" href="/tags/tctl">tctl</a> <a class="preview-modal-tag" href="/tags/cli reference">cli reference</a></div></div>.
  - In code by calling `ListWorkflowExecutions`.

Here is how to query Workflow Executions:

The [ListWorkflow()](https://pkg.go.dev/go.temporal.io/sdk/client#Client.ListWorkflow) function retrieves a list of [Workflow Executions](/workflows#workflow-execution) <span id="i-7606501d-e275-461e-8fe2-59c1159fd84a" class="clickable-i clickable-link-preview">i</span><div id="preview-modal-7606501d-e275-461e-8fe2-59c1159fd84a" class="preview-modal"><div class="modal-header"><div id="x-7606501d-e275-461e-8fe2-59c1159fd84a" class="clickable-x clickable-link-preview">x</div><b>Link preview:</b>&nbsp;&nbsp<a href="/workflows#workflow-execution">/workflows#workflow-execution</a></div><div class="preview-modal-title">What is a Workflow Execution?</div><div class="preview-modal-description">A Temporal Workflow Execution is a durable, scalable, reliable, and reactive function execution. It is the main unit of execution of a Temporal Application.</div><div class="preview-modal-tags"><a class="preview-modal-tag" href="/tags/term">term</a> <a class="preview-modal-tag" href="/tags/explanation">explanation</a></div></div> that match the [Search Attributes](/visibility#search-attribute) <span id="i-fc936750-32a1-42cd-882c-11fbc8f21f32" class="clickable-i clickable-link-preview">i</span><div id="preview-modal-fc936750-32a1-42cd-882c-11fbc8f21f32" class="preview-modal"><div class="modal-header"><div id="x-fc936750-32a1-42cd-882c-11fbc8f21f32" class="clickable-x clickable-link-preview">x</div><b>Link preview:</b>&nbsp;&nbsp<a href="/visibility#search-attribute">/visibility#search-attribute</a></div><div class="preview-modal-title">What is a Search Attribute?</div><div class="preview-modal-description">A Search Attribute is an indexed name used in List Filters to filter a list of Workflow Executions that have the Search Attribute in their metadata.</div><div class="preview-modal-tags"><a class="preview-modal-tag" href="/tags/term">term</a> <a class="preview-modal-tag" href="/tags/explanation">explanation</a> <a class="preview-modal-tag" href="/tags/filtered-lists">filtered-lists</a> <a class="preview-modal-tag" href="/tags/visibility">visibility</a></div></div> of a given [List Filter](/visibility#list-filter) <span id="i-06b17d3b-cb56-498d-8f71-b6e29433fa09" class="clickable-i clickable-link-preview">i</span><div id="preview-modal-06b17d3b-cb56-498d-8f71-b6e29433fa09" class="preview-modal"><div class="modal-header"><div id="x-06b17d3b-cb56-498d-8f71-b6e29433fa09" class="clickable-x clickable-link-preview">x</div><b>Link preview:</b>&nbsp;&nbsp<a href="/visibility#list-filter">/visibility#list-filter</a></div><div class="preview-modal-title">What is a List Filter?</div><div class="preview-modal-description">A List Filter is the SQL-like string that is provided as the parameter to an advanced Visibility List API.</div><div class="preview-modal-tags"><a class="preview-modal-tag" href="/tags/term">term</a> <a class="preview-modal-tag" href="/tags/explanation">explanation</a> <a class="preview-modal-tag" href="/tags/filtered-lists">filtered-lists</a> <a class="preview-modal-tag" href="/tags/visibility">visibility</a></div></div>.
The metadata returned from the [Visibility](/clusters#visibility) <span id="i-8784e17b-4c99-4caf-9f6b-15a98135175d" class="clickable-i clickable-link-preview">i</span><div id="preview-modal-8784e17b-4c99-4caf-9f6b-15a98135175d" class="preview-modal"><div class="modal-header"><div id="x-8784e17b-4c99-4caf-9f6b-15a98135175d" class="clickable-x clickable-link-preview">x</div><b>Link preview:</b>&nbsp;&nbsp<a href="/clusters#visibility">/clusters#visibility</a></div><div class="preview-modal-title">What is Visibility?</div><div class="preview-modal-description">The term Visibility, within the Temporal Platform, refers to the subsystems and APIs that enable an operator to view Workflow Executions that currently exist within a Cluster.</div><div class="preview-modal-tags"><a class="preview-modal-tag" href="/tags/term">term</a></div></div> store can be used to get a Workflow Execution's history and details from the [Persistence](/clusters#persistence) <span id="i-53fd606c-a375-423e-90fc-473febcdc14d" class="clickable-i clickable-link-preview">i</span><div id="preview-modal-53fd606c-a375-423e-90fc-473febcdc14d" class="preview-modal"><div class="modal-header"><div id="x-53fd606c-a375-423e-90fc-473febcdc14d" class="clickable-x clickable-link-preview">x</div><b>Link preview:</b>&nbsp;&nbsp<a href="/clusters#persistence">/clusters#persistence</a></div><div class="preview-modal-title">What is a Temporal Cluster?</div><div class="preview-modal-description">A Temporal Cluster is a Temporal Server paired with Persistence and Visibility stores.</div><div class="preview-modal-tags"><a class="preview-modal-tag" href="/tags/term">term</a> <a class="preview-modal-tag" href="/tags/explanation">explanation</a></div></div> store.

Use a List Filter to define a `request` to pass into `ListWorkflow()`.

```go
request := &workflowservice.ListWorkflowExecutionsRequest{ Query: "CloseTime = missing" }
```

This `request` value returns only open Workflows.
For more List Filter examples, see the [examples provided for List Filters in the Temporal Visibility guide.](/visibility#list-filter-examples) <span id="i-67a7ca69-1a80-436d-ba7e-0b7af1cb2a09" class="clickable-i clickable-link-preview">i</span><div id="preview-modal-67a7ca69-1a80-436d-ba7e-0b7af1cb2a09" class="preview-modal"><div class="modal-header"><div id="x-67a7ca69-1a80-436d-ba7e-0b7af1cb2a09" class="clickable-x clickable-link-preview">x</div><b>Link preview:</b>&nbsp;&nbsp<a href="/visibility#list-filter-examples">/visibility#list-filter-examples</a></div><div class="preview-modal-title">What is a List Filter?</div><div class="preview-modal-description">A List Filter is the SQL-like string that is provided as the parameter to an advanced Visibility List API.</div><div class="preview-modal-tags"><a class="preview-modal-tag" href="/tags/term">term</a> <a class="preview-modal-tag" href="/tags/explanation">explanation</a> <a class="preview-modal-tag" href="/tags/filtered-lists">filtered-lists</a> <a class="preview-modal-tag" href="/tags/visibility">visibility</a></div></div>

```go
resp, err := temporalClient.ListWorkflow(ctx.Background(), request)
if err != nil {
  return err
}

fmt.Println("First page of results:")
for _, exec := range resp.Executions {
  fmt.Printf("Workflow ID %v\n", exec.Execution.WorkflowId)
}
```

### How to set custom Search Attributes {#custom-search-attributes}

After you've created custom Search Attributes in your Cluster (using `tctl search-attribute create`or the Cloud UI), you can set the values of the custom Search Attributes when starting a Workflow.

Provide key-value pairs in [`StartWorkflowOptions.SearchAttributes`](https://pkg.go.dev/go.temporal.io/sdk/internal#StartWorkflowOptions).

Search Attributes are represented as `map[string]interface{}`.
The values in the map must correspond to the [Search Attribute's value type](/visibility#types):

- Bool = `bool`
- Datetime = `time.Time`
- Double = `float64`
- Int = `int64`
- Keyword = `string`
- Text = `string`

If you had custom Search Attributes `CustomerId` of type Keyword and `MiscData` of type Text, you would provide `string` values:

```go
func (c *Client) CallYourWorkflow(ctx context.Context, workflowID string, payload map[string]interface{}) error {
    // ...
    searchAttributes := map[string]interface{}{
        "CustomerId": payload["customer"],
        "MiscData": payload["miscData"]
    }
    options := client.StartWorkflowOptions{
        SearchAttributes:   searchAttributes
        // ...
    }
    we, err := c.Client.ExecuteWorkflow(ctx, options, app.YourWorkflow, payload)
    // ...
}
```

### How to upsert Search Attributes {#upsert-search-attributes}

You can upsert Search Attributes to add or update Search Attributes from within Workflow code.

In advanced cases, you may want to dynamically update these attributes as the Workflow progresses.
[UpsertSearchAttributes](https://pkg.go.dev/go.temporal.io/sdk/workflow#UpsertSearchAttributes) is used to add or update Search Attributes from within Workflow code.

`UpsertSearchAttributes` will merge attributes to the existing map in the Workflow.
Consider this example Workflow code:

```go
func YourWorkflow(ctx workflow.Context, input string) error {

    attr1 := map[string]interface{}{
        "CustomIntField": 1,
        "CustomBoolField": true,
    }
    workflow.UpsertSearchAttributes(ctx, attr1)

    attr2 := map[string]interface{}{
        "CustomIntField": 2,
        "CustomKeywordField": "seattle",
    }
    workflow.UpsertSearchAttributes(ctx, attr2)
}
```

After the second call to `UpsertSearchAttributes`, the map will contain:

```go
map[string]interface{}{
    "CustomIntField": 2, // last update wins
    "CustomBoolField": true,
    "CustomKeywordField": "seattle",
}
```

### How to remove a Search Attribute from a Workflow {#remove-search-attribute}

To remove a Search Attribute that was previously set, set it to an empty array: `[]`.

**There is no support for removing a field.**

However, to achieve a similar effect, set the field to some placeholder value.
For example, you could set `CustomKeywordField` to `impossibleVal`.
Then searching `CustomKeywordField != 'impossibleVal'` will match Workflows with `CustomKeywordField` not equal to `impossibleVal`, which includes Workflows without the `CustomKeywordField` set.

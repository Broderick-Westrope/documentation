---
id: message-passing
title: Message passing - Temporal SDK Features
sidebar_label: Message passing
sidebar_position: 4
description: Review message passing implementation guides.
slug: /dev-guide/sdk-features/message-passing
toc_max_heading_level: 4
keywords:
- determinism
- explanation
- queries
- runtime safeguards
- sdk feature
- signal
- temporal sdk
- term
- update
tags:
- determinism
- explanation
- queries
- runtime-safeguards
- sdk-feature
- signal
- temporal-sdk
- term
- update
---

<!-- THIS FILE IS GENERATED. DO NOT EDIT THIS FILE DIRECTLY -->

import LanguageLinks from '/docs/components/LanguageLinks';

Message passing enables communication between a Workflow Execution and a Temporal Client.
This capability enables interaction with an open Workflow from various locations, as a Temporal Client can be embedded within Activities or integrated into other systems.

There are three main message passing features:

- [Signals](#signals): Think of as an asynchronous "write-only" style of messages.
- [Queries](#queries): Think of a as a synchronous "read-only" style of messages.
- [Updates](#updates): Think of a as a synchronous "write/read" style of messages.

## Signals {#signals}

**What is a Signal?**

A Signal is an asynchronous request to a [Workflow Execution](/workflows#workflow-execution).

A Signal is a great way to send new data into an Open Workflow Execution.
You can use the new data to change the state of the Workflow.

<LanguageLinks>
- Go SDK
- [Feature guide](/dev-guide/go/features/signals/features/signals#)
- Java SDK
- [Feature guide](/dev-guide/java/features#signals)
- PHP SDK
- [Feature guide](/dev-guide/php/features#signals)
- Python SDK
- [Feature guide](/dev-guide/python/features#signals)
- TypeScript SDK
- [Feature guide](/dev-guide/typescript/features#signals)
</LanguageLinks>

A Signal transmits data to an active Workflow Execution but does not return data to the caller.
For returning data, use a [Query](#queries).

The Workflow code processing a Signal can alter the Workflow state.

Temporal Clients or other Workflows can send Signals.
Each Signal must specify a destination (Namespace and Workflow ID) and a name, and may carry a list of arguments.
Upon sending a Signal, the Cluster receives it and logs it as an Event in the Workflow Execution's Event History. Receiving a successful response from the Cluster indicates that the Signal is stored and will be delivered to the Workflow Execution at least once.[^1] The upcoming Workflow Task will include this Signal Event.

[^1] Signal handlers, which are effectively functions inside the Workflow, await Signals identified by their names.
The Cluster delivers these Signals in the order it receives them, recording them in the History.
To prevent issues with multiple Signal deliveries, integrate idempotency logic into your Signal handler to detect and handle duplicates.

## Queries {#queries}

**What is a Query?**

A Query is a synchronous operation used to get the state of a [Workflow Execution](/workflows#workflow-execution).

The state of a running Workflow Execution is constantly changing.
You can use Queries to expose the internal Workflow Execution state to the external world.
Queries are available for running or completed Workflows Executions only if the Worker is up and listening on the Task Queue.

<LanguageLinks>
- Go SDK
- [Feature guide](/dev-guide/go/features/queries#)
- Java SDK
- [Feature guide](/dev-guide/java/features#queries)
- PHP SDK
- [Feature guide](/dev-guide/php/features#queries)
- Python SDK
- [Feature guide](/dev-guide/python/features#queries)
- TypeScript SDK
- [Feature guide](/dev-guide/typescript/features#queries)
</LanguageLinks>

Temporal Clients initiate Queries to Workflow Executions using a synchronous API call.
Each Query is recognized by a specific Query name at both ends.
To process these Queries and provide data reflecting the current state of the Workflow Execution, the Workflow must implement corresponding Query handlers.

Queries ensure strong consistency, always returning the latest state of the Workflow.
This state mirrors all confirmed Events that occurred before the Query was issued.
An Event is 'confirmed' once its creation call succeeds.
Note that Events occurring during the Query may not always be included in the Query's resulting state.

Queries can include arguments to request specific data.
Workflows can offer various types of data in response to different Queries.

Importantly, Queries must never alter the Workflow Execution's state; they are strictly read-only and should avoid any blocking code.
For instance, Query handlers cannot initiate Activity Executions.

You can still send Queries to completed Workflow Executions, though you can configure specific rejection conditions for each Query.

#### Stack Trace Query

Many Temporal SDKs offer a built-in `__stack_trace` Query.
This Query provides the stack trace of all threads within the Workflow Execution, aiding in troubleshooting production issues.
For instance, if a Workflow Execution is stuck longer than expected, sending a `__stack_trace` Query can reveal the current call stack.
This special Query does not require additional handling in your Workflow code.

Note that Stack Trace Queries are available only for running Workflow Executions.

## Updates {#updates}

:::tip Support, stability, and dependency info

- Released in [Temporal Server version 1.21](https://github.com/temporalio/temporal/releases/tag/v1.21.0)
- Available in the [Go SDK](https://pkg.go.dev/go.temporal.io/sdk@v1.23.1/client#Client.UpdateWorkflowWithOptions) since [v1.23.0](https://github.com/temporalio/sdk-go/releases/tag/v1.23.0)
- Available in the [Java SDK](https://www.javadoc.io/doc/io.temporal/temporal-sdk/latest/io/temporal/client/WorkflowStub.html#startUpdate(io.temporal.client.UpdateOptions,java.lang.Object...)) since [v1.20.0](https://github.com/temporalio/sdk-java/releases/tag/v1.20.0)

:::

An Update is a request to and a response from a Temporal Client to a [Workflow Execution](/workflows#workflow-execution).

<LanguageLinks>
- Go SDK
- [Feature guide](/dev-guide/go/features/updates#)
- Java SDK
- [Feature guide](/dev-guide/java/features#updates)
</LanguageLinks>

You can think of an Update as a synchronous, blocking call that could replace both a Signal and a Query. An update is:

- A Signal with a response
- A Query that can change state
- The logical model of a Signal with the overhead and latency of a Query

The Workflow must have a function to handle the Update.
Unlike a [Signal](/workflows#signal) handler, the Update handler function can return a value to the caller.
The Update handler listens for Updates by the Update's name.

When there is the potential for multiple Updates to cause a duplication problem, Temporal recommends adding idempotency logic to your Update handler that checks for duplicates.

An Update has four phases.

1. **Admission.** The Temporal Cluster first validates Update submissions against the configured resource usage limits.
   For example, limits apply to concurrent requests and requests per second.
   For more details, see the [Temporal Platform defaults](/self-hosted-guide/defaults#).
   When this phase is complete, the Platform changes the status of the Update to **Admitted**.
   At this stage, the Platform hasn't yet persisted the Update to the Workflow Execution's Event History or sent it to a Worker.
2. **Validation.** An optional developer provided function that performs request validation.
   This validation code, similar to a [Query](/workflows#query) handler, can observe but not change the Workflow state.
   This means that the validation of an Update request may depend on the Workflow state at runtime.
   If an Update request doesn't pass validation at this stage, the system rejects the request and doesn't record anything in the Workflow Event History to indicate that the Update ever happened.
   The Update processing doesn't proceed to later phases.
   When the Update completes the validation stage, the Platform changes its state to **Accepted**.
   A [WorkflowExecutionUpdateAcceptedEvent](/references/events#workflowexecutionupdateacceptedevent) Event in the Workflow Execution [Event History](#event-history) denotes the acceptance of an Update.
3. **Execution.** Accepted Update requests move to the execution phase.
   In this phase, the Worker delivers the request to the Update handler.
   Like every bit of code in a Workflow, Update handlers must be [deterministic](/workflows#deterministic-constraints).
4. **Completion.** The Update handler can return a result or a language-appropriate error/exception to indicate its completion.
   The Platform sends the Update outcome back to the original invoking entity as an Update response.
   A [WorkflowExecutionUpdateCompletedEvent](/references/events#workflowexecutionupdatecompletedevent) Event in the Workflow Execution Event History denotes the completion of an Update.

:::note

Workflow Updates are currently disabled by default on Temporal Server.

To enable the `UpdateWorkflowExecution` API, set the [frontend.enableUpdateWorkflowExecution](https://github.com/temporalio/temporal/blob/main/common/dynamicconfig/constants.go) dynamic config value to `true`.

For example, to enable Workflow Updates with the Temporal CLI, pass the value when executing the `temporal` command:

```command
temporal server start-dev --dynamic-config-value frontend.enableUpdateWorkflowExecution=true
```

:::

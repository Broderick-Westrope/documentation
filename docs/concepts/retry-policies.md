---
id: retry-policies
title: Retry Policies
sidebar_label: Retry Policies
sidebar_position: 4
description: A Retry Policy works in cooperation with the timeouts to provide fine controls to optimize the execution experience.
slug: /retry-policies
toc_max_heading_level: 4
keywords:
- explanation
- term
tags:
- explanation
- term
---

<!-- THIS FILE IS GENERATED. DO NOT EDIT THIS FILE DIRECTLY -->

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

A Retry Policy works in cooperation with the timeouts to provide fine controls to optimize the execution experience.

A Retry Policy is a collection of attributes that instructs the Temporal Server how to retry a failure of a [Workflow Execution](/workflows#workflow-execution) or an [Activity Task Execution](/workers#activity-task-execution) <span id="i-7b5e89dc-142f-4faf-844a-b33c872c2844" class="clickable-i clickable-link-preview">ðŸ”—</span><div id="preview-modal-7b5e89dc-142f-4faf-844a-b33c872c2844" class="preview-modal"><div class="modal-header"><div id="x-7b5e89dc-142f-4faf-844a-b33c872c2844" class="clickable-x clickable-link-preview">x</div><b>Link preview</b></div><div class="preview-modal-title">What is an Activity Task Execution?</div><div class="preview-modal-description">An Activity Task Execution occurs when a Worker uses the context provided from the Activity Task and executes the Activity Definition.</div><div class="preview-modal-tags"><span class="preview-modal-tag">term</span> <span class="preview-modal-tag">explanation</span></div></div>.
(Retry Policies do not apply to [Workflow Task Executions](/workers#workflow-task-execution) <span id="i-dcb97499-47b3-4436-9881-d1ceba5bd992" class="clickable-i clickable-link-preview">ðŸ”—</span><div id="preview-modal-dcb97499-47b3-4436-9881-d1ceba5bd992" class="preview-modal"><div class="modal-header"><div id="x-dcb97499-47b3-4436-9881-d1ceba5bd992" class="clickable-x clickable-link-preview">x</div><b>Link preview</b></div><div class="preview-modal-title">What is a Workflow Task Execution?</div><div class="preview-modal-description">A Workflow Task Execution occurs when a Worker picks up a Workflow Task and uses it to make progress on the execution of a Workflow Definition.</div><div class="preview-modal-tags"><span class="preview-modal-tag">term</span> <span class="preview-modal-tag">explanation</span></div></div>, which always retry indefinitely.)

- [Activity retry simulator](/dev-guide/activity-retry-simulator)

---

- [How to set a custom Retry Policy for an Activity in Go](/dev-guide/go/features#activity-retries) <span id="i-7617efa5-164a-4436-9b24-ebd9cc0b7486" class="clickable-i clickable-link-preview">ðŸ”—</span><div id="preview-modal-7617efa5-164a-4436-9b24-ebd9cc0b7486" class="preview-modal"><div class="modal-header"><div id="x-7617efa5-164a-4436-9b24-ebd9cc0b7486" class="clickable-x clickable-link-preview">x</div><b>Link preview</b></div><div class="preview-modal-title">How to set an Activity Retry Policy</div><div class="preview-modal-description">Activity Executions are automatically associated with a default Retry Policy if a custom one is not provided.</div><div class="preview-modal-tags"><span class="preview-modal-tag">activity</span> <span class="preview-modal-tag">retry-and-timeout-policies</span> <span class="preview-modal-tag">activity-execution</span> <span class="preview-modal-tag">retries</span></div></div>
- [How to set a custom Retry Policy for an Activity in Java](/dev-guide/java/features#activity-retries) <span id="i-214c6528-1447-44f8-aebb-dba1128f4f9a" class="clickable-i clickable-link-preview">ðŸ”—</span><div id="preview-modal-214c6528-1447-44f8-aebb-dba1128f4f9a" class="preview-modal"><div class="modal-header"><div id="x-214c6528-1447-44f8-aebb-dba1128f4f9a" class="clickable-x clickable-link-preview">x</div><b>Link preview</b></div><div class="preview-modal-title">How to set an Activity Retry Policy</div><div class="preview-modal-description">Activity Executions are automatically associated with a default Retry Policy if a custom one is not provided.</div><div class="preview-modal-tags"><span class="preview-modal-tag">guide-context</span></div></div>
- [How to set a custom Retry Policy for an Activity in PHP](/dev-guide/php/features#activity-retries) <span id="i-8eb8ccc0-9671-41c3-9dd9-4bfbb3f0fc5c" class="clickable-i clickable-link-preview">ðŸ”—</span><div id="preview-modal-8eb8ccc0-9671-41c3-9dd9-4bfbb3f0fc5c" class="preview-modal"><div class="modal-header"><div id="x-8eb8ccc0-9671-41c3-9dd9-4bfbb3f0fc5c" class="clickable-x clickable-link-preview">x</div><b>Link preview</b></div><div class="preview-modal-title">How to set an Activity Retry Policy</div><div class="preview-modal-description">Activity Executions are automatically associated with a default Retry Policy if a custom one is not provided.</div><div class="preview-modal-tags"><span class="preview-modal-tag">guide-context</span></div></div>
- [How to set a custom Retry Policy for an Activity in Python](/dev-guide/python/features#activity-retries) <span id="i-5828af7b-c982-4cf0-8a03-e11b8044e08f" class="clickable-i clickable-link-preview">ðŸ”—</span><div id="preview-modal-5828af7b-c982-4cf0-8a03-e11b8044e08f" class="preview-modal"><div class="modal-header"><div id="x-5828af7b-c982-4cf0-8a03-e11b8044e08f" class="clickable-x clickable-link-preview">x</div><b>Link preview</b></div><div class="preview-modal-title">How to set an Activity Retry Policy</div><div class="preview-modal-description">Activity Executions are automatically associated with a default Retry Policy if a custom one is not provided.</div><div class="preview-modal-tags"><span class="preview-modal-tag">guide-context</span></div></div>
- [How to set a custom Retry Policy for an Activity in TypeScript](/dev-guide/typescript/features#activity-retries) <span id="i-1acc5311-ec64-4171-b4bf-5854df4183ad" class="clickable-i clickable-link-preview">ðŸ”—</span><div id="preview-modal-1acc5311-ec64-4171-b4bf-5854df4183ad" class="preview-modal"><div class="modal-header"><div id="x-1acc5311-ec64-4171-b4bf-5854df4183ad" class="clickable-x clickable-link-preview">x</div><b>Link preview</b></div><div class="preview-modal-title">How to set an Activity Retry Policy</div><div class="preview-modal-description">Activity Executions are automatically associated with a default Retry Policy if a custom one is not provided.</div><div class="preview-modal-tags"><span class="preview-modal-tag">guide-context</span></div></div>

---

- [How to set a Retry Policy for a Workflow in Go](/dev-guide/go/features#workflow-retries) <span id="i-a04e0f19-2336-429c-acb0-438459a06d9a" class="clickable-i clickable-link-preview">ðŸ”—</span><div id="preview-modal-a04e0f19-2336-429c-acb0-438459a06d9a" class="preview-modal"><div class="modal-header"><div id="x-a04e0f19-2336-429c-acb0-438459a06d9a" class="clickable-x clickable-link-preview">x</div><b>Link preview</b></div><div class="preview-modal-title">Workflow retries</div><div class="preview-modal-description">A Retry Policy can work in cooperation with the timeouts to provide fine controls to optimize the execution experience.</div><div class="preview-modal-tags"><span class="preview-modal-tag">developer-guide-doc-type</span> <span class="preview-modal-tag">retry-and-timeout-policies</span> <span class="preview-modal-tag">workflow-execution</span></div></div>
- [How to set a Retry Policy for a Workflow in Java](/dev-guide/java/features#workflow-retries) <span id="i-56429b49-972d-4af1-b41c-8acf051bda49" class="clickable-i clickable-link-preview">ðŸ”—</span><div id="preview-modal-56429b49-972d-4af1-b41c-8acf051bda49" class="preview-modal"><div class="modal-header"><div id="x-56429b49-972d-4af1-b41c-8acf051bda49" class="clickable-x clickable-link-preview">x</div><b>Link preview</b></div><div class="preview-modal-title">Workflow retries</div><div class="preview-modal-description">A Retry Policy can work in cooperation with the timeouts to provide fine controls to optimize the execution experience.</div><div class="preview-modal-tags"><span class="preview-modal-tag">guide-context</span></div></div>
- [How to set a Retry Policy for a Workflow in PHP](/dev-guide/php/features#workflow-retries) <span id="i-d285ced1-0b94-41e4-8b16-f043bb181cbe" class="clickable-i clickable-link-preview">ðŸ”—</span><div id="preview-modal-d285ced1-0b94-41e4-8b16-f043bb181cbe" class="preview-modal"><div class="modal-header"><div id="x-d285ced1-0b94-41e4-8b16-f043bb181cbe" class="clickable-x clickable-link-preview">x</div><b>Link preview</b></div><div class="preview-modal-title">Workflow retries</div><div class="preview-modal-description">A Retry Policy can work in cooperation with the timeouts to provide fine controls to optimize the execution experience.</div><div class="preview-modal-tags"><span class="preview-modal-tag">guide-context</span></div></div>
- [How to set a Retry Policy for a Workflow in Python](/dev-guide/python/features#workflow-retries) <span id="i-e0535b05-2022-45fc-8413-3831d9f9c16a" class="clickable-i clickable-link-preview">ðŸ”—</span><div id="preview-modal-e0535b05-2022-45fc-8413-3831d9f9c16a" class="preview-modal"><div class="modal-header"><div id="x-e0535b05-2022-45fc-8413-3831d9f9c16a" class="clickable-x clickable-link-preview">x</div><b>Link preview</b></div><div class="preview-modal-title">Workflow retries</div><div class="preview-modal-description">A Retry Policy can work in cooperation with the timeouts to provide fine controls to optimize the execution experience.</div><div class="preview-modal-tags"><span class="preview-modal-tag">guide-context</span></div></div>
- [How to set a Retry Policy for a Workflow in TypeScript](/dev-guide/typescript/features#workflow-retries) <span id="i-9b135f32-f852-4f80-b2e9-73f332d567ca" class="clickable-i clickable-link-preview">ðŸ”—</span><div id="preview-modal-9b135f32-f852-4f80-b2e9-73f332d567ca" class="preview-modal"><div class="modal-header"><div id="x-9b135f32-f852-4f80-b2e9-73f332d567ca" class="clickable-x clickable-link-preview">x</div><b>Link preview</b></div><div class="preview-modal-title">Workflow retries</div><div class="preview-modal-description">A Retry Policy can work in cooperation with the timeouts to provide fine controls to optimize the execution experience.</div><div class="preview-modal-tags"><span class="preview-modal-tag">guide-context</span></div></div>

<div class="tdiw"><div class="tditw"><p class="tdit">Diagram that shows the retry interval and its formula</p></div><div class="tdiiw"><img class="img_ev3q" src="/img/retry-interval-diagram.png" alt="Diagram that shows the retry interval and its formula" height="233" width="800" /></div></div>

## Default behavior

- **Workflow Execution**: When a Workflow Execution is spawned, it is not associated with a default Retry Policy and thus does not retry by default.
  The intention is that a Workflow Definition should be written to never fail due to intermittent issues; an Activity is designed to handle such issues.

- **Activity Execution**: When an Activity Execution is spawned, it is associated with a default Retry Policy, and thus Activity Task Executions are retried by default.
  When an Activity Task Execution is retried, the Cluster places a new [Activity Task](/workers#activity-task) <span id="i-8e1daa84-1326-4424-8a4a-5096cb50c278" class="clickable-i clickable-link-preview">ðŸ”—</span><div id="preview-modal-8e1daa84-1326-4424-8a4a-5096cb50c278" class="preview-modal"><div class="modal-header"><div id="x-8e1daa84-1326-4424-8a4a-5096cb50c278" class="clickable-x clickable-link-preview">x</div><b>Link preview</b></div><div class="preview-modal-title">What is an Activity Task?</div><div class="preview-modal-description">An Activity Task contains the context needed to make an Activity Task Execution.</div><div class="preview-modal-tags"><span class="preview-modal-tag">term</span> <span class="preview-modal-tag">explanation</span></div></div> into its respective [Activity Task Queue](/workers#task-queue) <span id="i-2fb1d7e4-322d-4558-a1a4-44ab45afe69e" class="clickable-i clickable-link-preview">ðŸ”—</span><div id="preview-modal-2fb1d7e4-322d-4558-a1a4-44ab45afe69e" class="preview-modal"><div class="modal-header"><div id="x-2fb1d7e4-322d-4558-a1a4-44ab45afe69e" class="clickable-x clickable-link-preview">x</div><b>Link preview</b></div><div class="preview-modal-title">What is a Task Queue?</div><div class="preview-modal-description">A Task Queue is a first-in, first-out queue that a Worker Process polls for Tasks.</div><div class="preview-modal-tags"><span class="preview-modal-tag">term</span> <span class="preview-modal-tag">explanation</span></div></div>, which results in a new Activity Task Execution.

## Custom Retry Policy

To use a custom Retry Policy, provide it as an options parameter when starting a Workflow Execution or Activity Execution.
Only certain scenarios merit starting a Workflow Execution with a custom Retry Policy, such as the following:

- A [Temporal Cron Job](/workflows#temporal-cron-job) <span id="i-7931ac4b-8320-4cbe-92dc-be779c2c4557" class="clickable-i clickable-link-preview">ðŸ”—</span><div id="preview-modal-7931ac4b-8320-4cbe-92dc-be779c2c4557" class="preview-modal"><div class="modal-header"><div id="x-7931ac4b-8320-4cbe-92dc-be779c2c4557" class="clickable-x clickable-link-preview">x</div><b>Link preview</b></div><div class="preview-modal-title">What is a Temporal Cron Job?</div><div class="preview-modal-description">A Temporal Cron Job is the series of Workflow Executions that occur when a Cron Schedule is provided in the call to spawn a Workflow Execution.</div><div class="preview-modal-tags"><span class="preview-modal-tag">term</span> <span class="preview-modal-tag">explanation</span></div></div> or some other stateless, always-running Workflow Execution that can benefit from retries.
- A file-processing or media-encoding Workflow Execution that downloads files to a host.

## Properties

### Default values for Retry Policy

```
Initial Interval     = 1 second
Backoff Coefficient  = 2.0
Maximum Interval     = 100 Ã— Initial Interval
Maximum Attempts     = âˆž
Non-Retryable Errors = []
```

### Initial Interval

- **Description**: Amount of time that must elapse before the first retry occurs.
  - **The default value is 1 second.**
- **Use case**: This is used as the base interval time for the [Backoff Coefficient](#backoff-coefficient) to multiply against.

### Backoff Coefficient

- **Description**: The value dictates how much the _retry interval_ increases.
  - **The default value is 2.0.**
  - A backoff coefficient of 1.0 means that the retry interval always equals the [Initial Interval](#initial-interval).
- **Use case**: Use this attribute to increase the interval between retries.
  By having a backoff coefficient greater than 1.0, the first few retries happen relatively quickly to overcome intermittent failures, but subsequent retries happen farther and farther apart to account for longer outages.
  Use the [Maximum Interval](#maximum-interval) attribute to prevent the coefficient from increasing the retry interval too much.

### Maximum Interval

- **Description**: Specifies the maximum interval between retries.
  - **The default value is 100 times the [Initial Interval](#initial-interval).**
- **Use case**: This attribute is useful for [Backoff Coefficients](#backoff-coefficient) that are greater than 1.0 because it prevents the retry interval from growing infinitely.

### Maximum Attempts

- **Description**: Specifies the maximum number of execution attempts that can be made in the presence of failures.
  - **The default is unlimited.**
  - If this limit is exceeded, the execution fails without retrying again. When this happens an error is returned.
  - Setting the value to 0 also means unlimited.
  - Setting the value to 1 means a single execution attempt and no retries.
  - Setting the value to a negative integer results in an error when the execution is invoked.
- **Use case**: Use this attribute to ensure that retries do not continue indefinitely.
  However, in the majority of cases, we recommend relying on the Workflow Execution Timeout, in the case of [Workflows](#workflow), or Schedule-To-Close Timeout, in the case of [Activities](#activity), to limit the total duration of retries instead of using this attribute.

### Non-Retryable Errors

- **Description**: Specifies errors that shouldn't be retried.
  - **Default is none.**
  - Errors are matched against the `type` field of the [Application Failure](/kb/failures#application-failure).
  - If one of those errors occurs, a retry does not occur.
- **Use case**: If you know of errors that should not trigger a retry, you can specify that, if they occur, the execution is not retried.

## Retry interval

The wait time before a retry is the _retry interval_. A retry interval is the smaller of two values:

- The [Initial Interval](#initial-interval) multiplied by the [Backoff Coefficient](#backoff-coefficient) raised to the power of the number of retries.
- The [Maximum Interval](#maximum-interval).

## Event History

There are some subtle nuances to how Events are recorded to an Event History when a Retry Policy comes into play.

- For an Activity Execution, the [ActivityTaskStarted](/workflows#activitytaskstarted) <span id="i-fe54a037-cc1f-4fa3-863d-88565b70a537" class="clickable-i clickable-link-preview">ðŸ”—</span><div id="preview-modal-fe54a037-cc1f-4fa3-863d-88565b70a537" class="preview-modal"><div class="modal-header"><div id="x-fe54a037-cc1f-4fa3-863d-88565b70a537" class="clickable-x clickable-link-preview">x</div><b>Link preview</b></div><div class="preview-modal-title">What is an Event?</div><div class="preview-modal-description">Events are created by the Temporal Cluster in response to external occurrences and Commands generated by a Workflow Execution.</div><div class="preview-modal-tags"><span class="preview-modal-tag">term</span> <span class="preview-modal-tag">explanation</span></div></div> Event will not show up in the Workflow Execution Event History until the Activity Execution has completed or failed (having exhausted all retries).
  This is to avoid filling the Event History with noise.
  Use the Describe API to get a pending Activity Execution's attempt count.

- For a Workflow Execution with a Retry Policy, if the Workflow Execution fails, the Workflow Execution will [Continue-As-New](/workflows#continue-as-new) <span id="i-12b9d04a-bd16-41ec-b05d-f990c5605b8b" class="clickable-i clickable-link-preview">ðŸ”—</span><div id="preview-modal-12b9d04a-bd16-41ec-b05d-f990c5605b8b" class="preview-modal"><div class="modal-header"><div id="x-12b9d04a-bd16-41ec-b05d-f990c5605b8b" class="clickable-x clickable-link-preview">x</div><b>Link preview</b></div><div class="preview-modal-title">What is Continue-As-New?</div><div class="preview-modal-description">Continue-As-New is the mechanism by which all relevant state is passed to a new Workflow Execution with a fresh Event History.</div><div class="preview-modal-tags"><span class="preview-modal-tag">term</span> <span class="preview-modal-tag">explanation</span> <span class="preview-modal-tag">continue-as-new</span></div></div> and the associated Event is written to the Event History.
  The [WorkflowExecutionContinuedAsNew](/workflows#workflowexecutioncontinuedasnew) <span id="i-f047a733-5335-4878-9379-3589f9cd264b" class="clickable-i clickable-link-preview">ðŸ”—</span><div id="preview-modal-f047a733-5335-4878-9379-3589f9cd264b" class="preview-modal"><div class="modal-header"><div id="x-f047a733-5335-4878-9379-3589f9cd264b" class="clickable-x clickable-link-preview">x</div><b>Link preview</b></div><div class="preview-modal-title">What is an Event?</div><div class="preview-modal-description">Events are created by the Temporal Cluster in response to external occurrences and Commands generated by a Workflow Execution.</div><div class="preview-modal-tags"><span class="preview-modal-tag">term</span> <span class="preview-modal-tag">explanation</span></div></div> Event will have an "initiator" field that will specify the Retry Policy as the value and the new Run Id for the next retry attempt.
  The new Workflow Execution is created immediately.
  But the first Workflow Task won't be scheduled until the backoff duration is exhausted.
  That duration is recorded as the `firstWorkflowTaskBackoff` field of the new run's `WorkflowExecutionStartedEventAttributes` event.
